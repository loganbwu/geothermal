select(facility, mean, sd, n_test, n_pi) %>%
mutate(error.coef = sd/mean)
print(xtable(sourcetab %>% head(), type = "latex",
caption="Upon inspection of the wells with the most variance, there is no immediate cause for high variance. This requires further investigation.",
label="tab:well_summaries"),
table.placement = "h",
file = "../_media/well_summaries.tex")
sourcetab %>% datatable(caption = "Production errors and data sources")
nrow(regression_df)
nrow(dry_df)
object.size(outmatrix)
unlink('index_cache', recursive = TRUE)
ncol(outmatrix)
knitr::opts_chunk$set(echo = TRUE, cache=TRUE)
library(tidyverse)
library(readxl)
library(extrafont)
library(lubridate)
library(viridis)
datapath = '../wairakei_data/plotdata.xlsx'
regdatapath = '../wairakei_data/data.xlsx'
WK261 = read_excel(datapath, 'WK261')
regression.df = read_excel(regdatapath, 'data')
ggplot(WK261, aes(x=date, y=mf)) +
geom_smooth(method='lm', se=F) +
geom_point() +
ggtitle('Fitted Mass Flow at Standardised WHP (10.7 bar)') +
xlab('Date') + ylab('Mass flow (T/h)') +
ylim(c(0, NA)) +
theme(text=element_text(family="Times New Roman")) +
ggsave('../media/wk261_standardised_mf.png', width=6, height=4, units='in')
plotdata = regression.df %>%
filter(well=='wk263') %>%
mutate(datetime = factor(as.Date(date))) %>%
group_by(round(date_numeric,-2)) %>%
filter(n()>2) %>%
mutate(mf2 = mf^2)
ggplot(WK261, aes(x=date, y=mf)) +
geom_smooth(method='lm', se=F) +
geom_point() +
ggtitle('Fitted Mass Flow at Standardised WHP (10.7 bar)') +
xlab('Date') + ylab('Mass flow (T/h)') +
ylim(c(0, NA)) +
theme(text=element_text(family="Times New Roman"))# +
# ggsave('../media/wk261_standardised_mf.png', width=6, height=4, units='in')
knitr::opts_chunk$set(echo = TRUE, cache=TRUE)
library(tidyverse)
library(readxl)
library(extrafont)
library(lubridate)
library(viridis)
datapath = '../wairakei_data/plotdata.xlsx'
regdatapath = '../wairakei_data/data.xlsx'
base_year = '2000'
base_datetime = as.POSIXct(paste(base_year, 1, 1, sep='-'))
WK261 = read_excel(datapath, 'WK261')
regression.df = read_excel(regdatapath, 'data')
plotdata = regression.df %>%
filter(well=='wk263') %>%
mutate(date_numeric = as.numeric(date - base_datetime)) %>%
mutate(date_numeric=ifelse(date_numeric>0, date_numeric, NA)) %>%
mutate(datetime = factor(as.Date(date))) %>%
group_by(round(date_numeric,-2)) %>%
filter(n()>2) %>%
mutate(mf2 = mf^2)
mylm = lm(mf2 ~ datetime * I(whp^2) + datetime +0, data=plotdata)
datetime = plotdata$datetime %>% unique()
whp = seq(0, 16, 0.01)
reglines = expand.grid(datetime=datetime, whp=whp)
reglines$mf2 <- unname(predict(mylm, reglines))
reglines$mf <- sqrt(reglines$mf2)
reglines$date = as.POSIXct(reglines$datetime)
shifts = as.vector(mylm$coefficients[1:6])
ggplot(plotdata, aes(x=whp, y=mf, color=date)) +
geom_point() +
ggtitle('Production Curves from Multiple Bore Tests (10.7 bar)') +
xlab('Well-head pressure (bar)') + ylab('Mass flow (T/h)') +
xlim(c(0, NA)) + ylim(c(0, NA)) +
theme(text=element_text(family="Times New Roman")) +
geom_line(data=reglines, aes(linetype=datetime)) +
labs(color="Date", linetype="Fitted curve")# +
# ggsave('../media/wk261_production.png', width=6, height=4, units='in')
ggplot(plotdata, aes(x=whp, y=mf, group=date)) +
geom_point() +
ggtitle('Production Curves from Multiple Bore Tests (10.7 bar)') +
xlab('Well-head pressure (bar)') + ylab('Mass flow (T/h)') +
xlim(c(0, NA)) + ylim(c(0, NA)) +
theme(text=element_text(family="Times New Roman")) +
geom_line(data=reglines, aes(linetype=datetime)) +
labs(color="Date", linetype="Fitted curve")# +
ggplot(plotdata, aes(x=whp, y=mf, color=date)) +
geom_point() +
ggtitle('Production Curves from Multiple Bore Tests (10.7 bar)') +
xlab('Well-head pressure (bar)') + ylab('Mass flow (T/h)') +
xlim(c(0, NA)) + ylim(c(0, NA)) +
theme(text=element_text(family="Times New Roman")) +
guides(color=F) +
geom_line(data=reglines, aes(linetype=datetime)) +
labs(color="Date", linetype="Fitted curve")# +
head(reglines)
whp
decay = reglines %>%
filter(whp==10.7)
decay
head(whp)
decay = reglines %>%
filter(whp>10.699, whp<10.701)
decay
decay = reglines %>%
filter(abs(whp-10.7) < 1e-3)
decay
ggplot(decay, aes(x=date, y=mf)) +
geom_line()
ggplot(decay, aes(x=date, y=mf)) +
geom_point()
ggplot(decay, aes(x=date, y=mf)) +
geom_point() +
geom_smooth()
?geom_smooth
ggplot(decay, aes(x=date, y=mf)) +
geom_point() +
geom_smooth(method="lm")
ggplot(decay, aes(x=date, y=mf)) +
geom_point() +
geom_line(alpha=0.5)
ggplot(decay, aes(x=date, y=mf)) +
geom_point() +
geom_line(alpha=0.5) +
geom_smooth(method="lm")
ggplot(decay, aes(x=date, y=mf)) +
geom_point() +
geom_line(alpha=0.5) +
geom_smooth(method="lm") +
labs(title="Estimated Well Decay at 10.7 Bar", x="Date", y="Standardised mass flow")
knitr::opts_chunk$set(echo = TRUE, cache=TRUE)
library(tidyverse)
library(readxl)
library(extrafont)
library(lubridate)
library(viridis)
library(plotly)
datapath = '../wairakei_data/plotdata.xlsx'
regdatapath = '../wairakei_data/data.xlsx'
base_year = '2000'
base_datetime = as.POSIXct(paste(base_year, 1, 1, sep='-'))
WK261 = read_excel(datapath, 'WK261')
regression.df = read_excel(regdatapath, 'data')
plotdata = regression.df %>%
filter(well=='wk261') %>%
mutate(date_numeric = as.numeric(date - base_datetime)) %>%
mutate(date_numeric=ifelse(date_numeric>0, date_numeric, NA)) %>%
mutate(datetime = factor(as.Date(date))) %>%
group_by(round(date_numeric,-2)) %>%
filter(n()>2) %>%
mutate(mf2 = mf^2)
mylm = lm(mf2 ~ datetime * I(whp^2) + datetime +0, data=plotdata)
datetime = plotdata$datetime %>% unique()
whp = seq(0, 16, 0.01)
reglines = expand.grid(datetime=datetime, whp=whp)
reglines$mf2 <- unname(predict(mylm, reglines))
reglines$mf <- sqrt(reglines$mf2)
reglines$date = as.POSIXct(reglines$datetime)
shifts = as.vector(mylm$coefficients[1:6])
ggplot(plotdata, aes(x=whp, y=mf, color=date)) +
geom_point() +
ggtitle('Production Curves from Multiple Bore Tests (10.7 bar)') +
xlab('Well-head pressure (bar)') + ylab('Mass flow (T/h)') +
xlim(c(0, NA)) + ylim(c(0, NA)) +
# theme(text=element_text(family="Times New Roman")) +
guides(color=F) +
geom_line(data=reglines, aes(linetype=datetime)) +
labs(color="Date", linetype="Fitted curve")# +
# ggsave('../media/wk261_production.png', width=6, height=4, units='in')
decay = reglines %>%
filter(abs(whp-10.7) < 1e-3)
decayplot = ggplot(decay, aes(x=date, y=mf)) +
geom_point() +
geom_line(alpha=0.5) +
geom_smooth(method="lm") +
labs(title="Estimated Well Decay at 10.7 Bar", x="Date", y="Standardised mass flow")
ggplotly(decayplot)
ggplot(WK261, aes(x=date, y=mf)) +
geom_smooth(method='lm') +
geom_point() +
ggtitle('Fitted Mass Flow at Standardised WHP (10.7 bar)') +
xlab('Date') + ylab('Mass flow (T/h)') +
ylim(c(0, NA))# +
decayplot = ggplot(decay, aes(x=date, y=mf)) +
geom_point() +
geom_line(alpha=0.5) +
geom_smooth(method="lm") +
geom_smooth(data=WK261, color="red") +
labs(title="Estimated Well Decay at 10.7 Bar", x="Date", y="Standardised mass flow")
ggplotly(decayplot)
decayplot = ggplot(decay, aes(x=date, y=mf)) +
geom_point() +
geom_line(alpha=0.5) +
geom_smooth(method="lm") +
geom_smooth(data=WK261, method="lm", color="red") +
labs(title="Estimated Well Decay at 10.7 Bar", x="Date", y="Standardised mass flow")
ggplotly(decayplot)
decayplot = ggplot(decay, aes(x=date, y=mf)) +
geom_point() +
geom_line(alpha=0.5) +
geom_smooth(method="lm") +
geom_smooth(data=WK261, method="lm", fill="red") +
labs(title="Estimated Well Decay at 10.7 Bar", x="Date", y="Standardised mass flow")
ggplotly(decayplot)
?geom_point
decayplot = ggplot(decay, aes(x=date, y=mf)) +
geom_point() +
geom_line(alpha=0.5) +
geom_smooth(method="lm") +
geom_point(data=WK261, color="red") +
geom_smooth(data=WK261, method="lm", fill="red") +
labs(title="Estimated Well Decay at 10.7 Bar", x="Date", y="Standardised mass flow")
ggplotly(decayplot)
head(WK261)
head(regression.df)
head(WK261)
decay = reglines %>%
filter(abs(whp-10.7) < 1e-3) %>%
mutate(key="contactfit") %>%
select(date, mf) %>%
rbind(WK261)
decay = reglines %>%
filter(abs(whp-10.7) < 1e-3) %>%
mutate(key="contactfit") %>%
select(date, mf, key) %>%
rbind(WK261 %>% mutate(key="mine"))
decayplot = ggplot(decay, aes(x=date, y=mf, color=key)) +
geom_point() +
geom_line(alpha=0.5) +
geom_smooth(method="lm") +
labs(title="Estimated Well Decay at 10.7 Bar", x="Date", y="Standardised mass flow")
ggplotly(decayplot)
decayplot = ggplot(decay, aes(x=date, y=mf, color=key)) +
geom_point() +
geom_smooth(method="lm") +
labs(title="Estimated Well Decay at 10.7 Bar", x="Date", y="Standardised mass flow")
ggplotly(decayplot)
decayplot = ggplot(decay, aes(x=date, y=mf, color=key)) +
geom_point(alpha=0.5) +
geom_smooth(method="lm") +
labs(title="Estimated Well Decay at 10.7 Bar", x="Date", y="Standardised mass flow")
ggplotly(decayplot)
decayplot = ggplot(decay, aes(x=date, y=mf, color=key)) +
geom_point(alpha=0.5) +
geom_smooth(method="lm") +
facet_grid(~.key) +
labs(title="Estimated Well Decay at 10.7 Bar", x="Date", y="Standardised mass flow")
ggplotly(decayplot)
decayplot = ggplot(decay, aes(x=date, y=mf, color=key)) +
geom_point(alpha=0.5) +
geom_smooth(method="lm") +
facet_grid(~key) +
labs(title="Estimated Well Decay at 10.7 Bar", x="Date", y="Standardised mass flow")
ggplotly(decayplot)
decayplot = ggplot(decay, aes(x=date, y=mf, color=key)) +
geom_point() +
geom_smooth(method="lm") +
facet_grid(~key) +
labs(title="Estimated Well Decay at 10.7 Bar", x="Date", y="Standardised mass flow")
ggplotly(decayplot)
decay = reglines %>%
filter(abs(whp-10.7) < 1e-3) %>%
mutate(key="Contact") %>%
select(date, mf, Method) %>%
rbind(WK261 %>% mutate(Method="Multiple Linear"))
decay = reglines %>%
filter(abs(whp-10.7) < 1e-3) %>%
mutate(Method="Contact") %>%
select(date, mf, Method) %>%
rbind(WK261 %>% mutate(Method="Multiple Linear"))
decayplot = ggplot(decay, aes(x=date, y=mf, color=Method)) +
geom_point() +
geom_smooth(method="lm") +
facet_grid(~Method) +
labs(title="Estimated Well Decay at 10.7 Bar", x="Date", y="Standardised mass flow")
ggplotly(decayplot)
knitr::opts_chunk$set(echo = TRUE, cache=TRUE, warning=FALSE)
library(tidyverse)
library(readxl)
library(extrafont)
library(lubridate)
library(viridis)
library(plotly)
datapath = '../wairakei_data/plotdata.xlsx'
regdatapath = '../wairakei_data/data.xlsx'
base_year = '2000'
base_datetime = as.POSIXct(paste(base_year, 1, 1, sep='-'))
WK261 = read_excel(datapath, 'WK261')
regression.df = read_excel(regdatapath, 'data') %>% filter(well=="wk261")
plotdata = regression.df %>%
mutate(date_numeric = as.numeric(date - base_datetime)) %>%
mutate(date_numeric=ifelse(date_numeric>0, date_numeric, NA)) %>%
mutate(datetime = factor(as.Date(date))) %>%
group_by(round(date_numeric,-2)) %>%
filter(n()>=2) %>%
mutate(mf2 = mf^2)
mylm = lm(mf2 ~ datetime * I(whp^2) + datetime +0, data=plotdata)
datetime = plotdata$datetime %>% unique()
whp = seq(0, 16, 0.01)
reglines = expand.grid(datetime=datetime, whp=whp)
reglines$mf2 <- unname(predict(mylm, reglines))
reglines$mf <- sqrt(reglines$mf2)
reglines$date = as.POSIXct(reglines$datetime)
shifts = as.vector(mylm$coefficients[1:6])
ggplot(plotdata, aes(x=whp, y=mf, color=date)) +
geom_point() +
ggtitle('Production Curves from Multiple Bore Tests (10.7 bar)') +
xlab('Well-head pressure (bar)') + ylab('Mass flow (T/h)') +
xlim(c(0, NA)) + ylim(c(0, NA)) +
guides(color=F) +
geom_line(data=reglines, aes(linetype=datetime)) +
labs(color="Date", linetype="Fitted curve")
decay = reglines %>%
filter(abs(whp-10.7) < 1e-3) %>%
mutate(Method="Contact") %>%
select(date, mf, Method) %>%
rbind(WK261 %>% mutate(Method="Multiple Linear"))
decayplot = ggplot(decay, aes(x=date, y=mf, color=Method)) +
geom_point() +
geom_smooth(method="lm") +
facet_grid(~Method) +
labs(title="Estimated Well Decay at 10.7 Bar", x="Date", y="Standardised mass flow")
ggplotly(decayplot)
plotdata = regression.df %>%
mutate(date_numeric = as.numeric(date - base_datetime)) %>%
mutate(date_numeric=ifelse(date_numeric>0, date_numeric, NA)) %>%
mutate(datetime = factor(as.Date(date))) %>%
group_by(round(date_numeric,-2)) %>%
filter(n()>2) %>%
mutate(mf2 = mf^2)
mylm = lm(mf2 ~ datetime * I(whp^2) + datetime +0, data=plotdata)
datetime = plotdata$datetime %>% unique()
whp = seq(0, 16, 0.01)
reglines = expand.grid(datetime=datetime, whp=whp)
reglines$mf2 <- unname(predict(mylm, reglines))
reglines$mf <- sqrt(reglines$mf2)
reglines$date = as.POSIXct(reglines$datetime)
shifts = as.vector(mylm$coefficients[1:6])
ggplot(plotdata, aes(x=whp, y=mf, color=date)) +
geom_point() +
ggtitle('Production Curves from Multiple Bore Tests (10.7 bar)') +
xlab('Well-head pressure (bar)') + ylab('Mass flow (T/h)') +
xlim(c(0, NA)) + ylim(c(0, NA)) +
guides(color=F) +
geom_line(data=reglines, aes(linetype=datetime)) +
labs(color="Date", linetype="Fitted curve")
decay = reglines %>%
filter(abs(whp-10.7) < 1e-3) %>%
mutate(Method="Contact") %>%
select(date, mf, Method) %>%
rbind(WK261 %>% mutate(Method="Multiple Linear"))
decayplot = ggplot(decay, aes(x=date, y=mf, color=Method)) +
geom_point() +
geom_smooth(method="lm") +
facet_grid(~Method) +
labs(title="Estimated Well Decay at 10.7 Bar", x="Date", y="Standardised mass flow")
ggplotly(decayplot)
plotdata = regression.df %>%
mutate(date_numeric = as.numeric(date - base_datetime)) %>%
mutate(date_numeric=ifelse(date_numeric>0, date_numeric, NA)) %>%
mutate(datetime = factor(as.Date(date))) %>%
group_by(round(date_numeric,-2)) %>%
filter(n()>=2) %>%
mutate(mf2 = mf^2)
mylm = lm(mf2 ~ datetime * I(whp^2) + datetime +0, data=plotdata)
datetime = plotdata$datetime %>% unique()
whp = seq(0, 16, 0.01)
reglines = expand.grid(datetime=datetime, whp=whp)
reglines$mf2 <- unname(predict(mylm, reglines))
reglines$mf <- sqrt(reglines$mf2)
reglines$date = as.POSIXct(reglines$datetime)
shifts = as.vector(mylm$coefficients[1:6])
ggplot(plotdata, aes(x=whp, y=mf, color=date)) +
geom_point() +
ggtitle('Production Curves from Multiple Bore Tests (10.7 bar)') +
xlab('Well-head pressure (bar)') + ylab('Mass flow (T/h)') +
xlim(c(0, NA)) + ylim(c(0, NA)) +
guides(color=F) +
geom_line(data=reglines, aes(linetype=datetime)) +
labs(color="Date", linetype="Fitted curve")
plotdata = regression.df %>%
mutate(date_numeric = as.numeric(date - base_datetime)) %>%
mutate(date_numeric=ifelse(date_numeric>0, date_numeric, NA)) %>%
mutate(datetime = factor(as.Date(date))) %>%
group_by(round(date_numeric,-2)) %>%
filter(n()>=1) %>%
mutate(mf2 = mf^2)
mylm = lm(mf2 ~ datetime * I(whp^2) + datetime +0, data=plotdata)
datetime = plotdata$datetime %>% unique()
whp = seq(0, 16, 0.01)
reglines = expand.grid(datetime=datetime, whp=whp)
reglines$mf2 <- unname(predict(mylm, reglines))
reglines$mf <- sqrt(reglines$mf2)
reglines$date = as.POSIXct(reglines$datetime)
shifts = as.vector(mylm$coefficients[1:6])
ggplot(plotdata, aes(x=whp, y=mf, color=date)) +
geom_point() +
ggtitle('Production Curves from Multiple Bore Tests (10.7 bar)') +
xlab('Well-head pressure (bar)') + ylab('Mass flow (T/h)') +
xlim(c(0, NA)) + ylim(c(0, NA)) +
guides(color=F) +
geom_line(data=reglines, aes(linetype=datetime)) +
labs(color="Date", linetype="Fitted curve")
ggplot(plotdata, aes(x=whp, y=mf, color=date)) +
geom_point() +
ggtitle('Production Curves from Multiple Bore Tests (10.7 bar)') +
xlab('Well-head pressure (bar)') + ylab('Mass flow (T/h)') +
xlim(c(0, NA)) + ylim(c(0, NA)) +
guides(color=F) +
geom_line(data=reglines, aes(group=datetime)) +
labs(color="Date", linetype="Fitted curve")
plotdata = regression.df %>%
mutate(date_numeric = as.numeric(date - base_datetime)) %>%
mutate(date_numeric=ifelse(date_numeric>0, date_numeric, NA)) %>%
mutate(datetime = factor(as.Date(date))) %>%
group_by(round(date_numeric,-2)) %>%
filter(n()>2) %>%
mutate(mf2 = mf^2)
plotdata = regression.df %>%
mutate(date_numeric = as.numeric(date - base_datetime)) %>%
mutate(date_numeric=ifelse(date_numeric>0, date_numeric, NA)) %>%
mutate(datetime = factor(as.Date(date))) %>%
group_by(round(date_numeric,-2)) %>%
filter(n()>2) %>%
mutate(mf2 = mf^2)
mylm = lm(mf2 ~ datetime * I(whp^2) + datetime +0, data=plotdata)
datetime = plotdata$datetime %>% unique()
whp = seq(0, 16, 0.01)
reglines = expand.grid(datetime=datetime, whp=whp)
reglines$mf2 <- unname(predict(mylm, reglines))
reglines$mf <- sqrt(reglines$mf2)
reglines$date = as.POSIXct(reglines$datetime)
shifts = as.vector(mylm$coefficients[1:6])
ggplot(plotdata, aes(x=whp, y=mf, color=date)) +
geom_point() +
ggtitle('Production Curves from Multiple Bore Tests (10.7 bar)') +
xlab('Well-head pressure (bar)') + ylab('Mass flow (T/h)') +
xlim(c(0, NA)) + ylim(c(0, NA)) +
guides(color=F) +
geom_line(data=reglines, aes(linetype=datetime)) +
labs(color="Date", linetype="Fitted curve")
decayplot = ggplot(decay, aes(x=date, y=mf, color=Method)) +
geom_point() +
geom_smooth(method="lm") +
facet_grid(~Method) +
labs(title="Estimated Well Decay at 10.7 Bar", x="Date", y="Standardised mass flow", color="Data")
ggplotly(decayplot)
knitr::opts_chunk$set(echo = TRUE, cache=TRUE, warning=FALSE)
library(tidyverse)
library(readxl)
library(extrafont)
library(lubridate)
library(viridis)
library(plotly)
datapath = '../wairakei_data/plotdata.xlsx'
regdatapath = '../wairakei_data/data.xlsx'
base_year = '2000'
base_datetime = as.POSIXct(paste(base_year, 1, 1, sep='-'))
WK_fit = read_excel(datapath, 'WK261')
regression.df = read_excel(regdatapath, 'data') %>% filter(well=="wk261")
curveplot = ggplot(plotdata, aes(x=whp, y=mf, color=date)) +
geom_point() +
ggtitle('Production Curves from Multiple Bore Tests (10.7 bar)') +
xlab('Well-head pressure (bar)') + ylab('Mass flow (T/h)') +
xlim(c(0, NA)) + ylim(c(0, NA)) +
guides(color=F) +
geom_line(data=reglines, aes(linetype=date)) +
labs(color="Date", linetype="Fitted curve")
ggplotly(curveplot)
curveplot = ggplot(plotdata, aes(x=whp, y=mf, color=date)) +
geom_point() +
ggtitle('Production Curves from Multiple Bore Tests (10.7 bar)') +
xlab('Well-head pressure (bar)') + ylab('Mass flow (T/h)') +
xlim(c(0, NA)) + ylim(c(0, NA)) +
guides(color=F) +
geom_line(data=reglines, aes(linetype=factor(date))) +
labs(color="Date", linetype="Fitted curve")
ggplotly(curveplot)
curveplot = ggplot(plotdata, aes(x=whp, y=mf, color=date)) +
geom_point() +
ggtitle('Production Curves from Multiple Bore Tests (10.7 bar)') +
xlab('Well-head pressure (bar)') + ylab('Mass flow (T/h)') +
xlim(c(0, NA)) + ylim(c(0, NA)) +
guides(color=F) +
geom_line(data=reglines %>%
mutate(date=factor(date)) %>%
select(-datetime),
aes(linetype=date)) +
labs(color="Date", linetype="Fitted curve")
ggplotly(curveplot)
curveplot = ggplot(plotdata, aes(x=whp, y=mf, color=date)) +
geom_point() +
ggtitle('Production Curves from Multiple Bore Tests (10.7 bar)') +
xlab('Well-head pressure (bar)') + ylab('Mass flow (T/h)') +
xlim(c(0, NA)) + ylim(c(0, NA)) +
guides(color=F) +
geom_line(data=reglines, aes(linetype=factor(date))) +
labs(color="Date", linetype="Fitted curve")
ggplotly(curveplot)
curveplot = ggplot(plotdata, aes(x=whp, y=mf, color=date)) +
geom_point() +
ggtitle('Production Curves from Multiple Bore Tests (10.7 bar)') +
xlab('Well-head pressure (bar)') + ylab('Mass flow (T/h)') +
xlim(c(0, NA)) + ylim(c(0, NA)) +
guides(color=F) +
geom_line(data=reglines %>% select(-datetime), aes(linetype=factor(date))) +
labs(color="Date", linetype="Fitted curve")
ggplotly(curveplot)
